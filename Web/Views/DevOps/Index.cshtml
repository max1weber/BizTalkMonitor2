@using BizTalk.Monitor.Web.ViewComponents
@using BizTalk.Monitor.Data.Entities

@model PaginatedList<Fault>
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Latest Faults</h1>


<table id="dtBasicExample" class="table table-striped table-bordered " cellspacing="0" width="100%">
    <thead>
            <tr>
            <th class="th-sm">
                Details
            </th>
            <th class="th-sm">
                DateTime

            </th>
            <th class="th-sm">
                Application

            </th>
            <th class="th-sm">
                ServiceName

            </th>
            <th class="th-sm">
                Scope

            </th>
            <th class="th-sm">
                FaultSeverity

            </th>
            <th class="th-sm">
                FaultDescription

            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td><a asp-action="Faultdetails" asp-route-id="@item.FaultId" class="btn btn-info">Details</a></td>
                <td>@item.DateTime </td>
                <td>@item.Application</td>
                <td>@item.ServiceName</td>
                <td>@item.Scope</td>
                <td>@item.FaultSeverity</td>
                <td>@item.FaultDescription</td>
            </tr>
        }

    </tbody>
    <tfoot>
        <tr>
            <th class="th-sm">
                DateTime

            </th>
            <th class="th-sm">
                Application

            </th>
            <th class="th-sm">
                ServiceName

            </th>
            <th class="th-sm">
                Scope

            </th>
            <th class="th-sm">
                FaultSeverity

            </th>
            <th class="th-sm">
                FaultDescription

            </th>
        </tr>
    </tfoot>
</table>@*
@{
    var prevDisabled = !Model.HasPreviousPage ? "disabled" : "";
    var nextDisabled = !Model.HasNextPage ? "disabled" : "";
}

<nav aria-label="Pagination" class="col-12">
    <ul class="pagination justify-content-end">
        <li class="page-item @prevDisabled">
            <a class="page-link"
               asp-controller="devops"
               asp-action="index"
               asp-route-pageIndex="@(Model.PageIndex - 1)"
               aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">Previous</span>
            </a>
        </li>
        @foreach (var i in Model.PageIndexesToDisplay)
        {
            var activeClass = i.IsActive ? "active" : "";

            <li class="page-item @activeClass">
                <a class="page-link"
                   asp-controller="devops"
                   asp-action="index"
                   asp-route-pageIndex="@(i.Index)">@i.Index</a>
            </li>
        }
        <li class="page-item @nextDisabled">
            <a class="page-link"
               asp-controller="devops"
               asp-action="index"
               asp-route-pageIndex="@(Model.PageIndex + 1)"
               aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Next</span>
            </a>
        </li>
    </ul>
</nav>*@

@section Scripts {
    <script>
        $(document).ready(function () {
            console.log("Datatable started");
            $('#dtBasicExample').DataTable({
                "scrollY": "750px",
                "scrollCollapse": true,
            });
            $('.dataTables_length').addClass('bs-select');

            
        });

    </script>
}